<div class="p-inputgroup">
    <span class="p-inputgroup-addon">Name</span>
    <input pInputText [(ngModel)]="conditions.name">
    <span class="p-inputgroup-addon">Price</span>
    <input pInputText [(ngModel)]="conditions.priceMin">
    <span class="p-inputgroup-addon">~</span>
    <input pInputText [(ngModel)]="conditions.priceMax">
    <span class="p-inputgroup-addon">
        <button pButton icon="pi pi-search" (click)="paginator.search()"></button>
        <button pButton icon="pi pi-times" (click)="clearConditions()"></button>
        <button pButton icon="pi pi-plus" (click)="dialog.onEdit(true)"></button>
    </span>
</div>

<p-confirmPopup></p-confirmPopup>
<paginatorEnhancer #paginator (onLoadData)="loadDatas($event)" [(conditions)]="conditions"></paginatorEnhancer>
<p-table [value]="datas" [tableStyle]="{'min-width': '50rem'}">
    <ng-template pTemplate="header">
        <tr>
            <th (click)="paginator.onOrderBy('id')">Id</th>
            <th (click)="paginator.onOrderBy('name')">Name</th>
            <th (click)="paginator.onOrderBy('price')">Price</th>
            <th (click)="paginator.onOrderBy('count')">Count</th>
            <th></th>
        </tr>
    </ng-template>
    <ng-template pTemplate="body" let-item>
        <tr>
            <td>{{item.id}}</td>
            <td>{{item.name}}</td>
            <td>{{item.price}}</td>
            <td>{{item.count}}</td>
            <td>
                <button pButton icon="pi pi-pencil" (click)="dialog.onEdit(false,item)"></button>
                <button pButton icon="pi pi-trash" (click)="delete(item)"></button>
            </td>
        </tr>
    </ng-template>
</p-table>

<crud-dialog #dialog [(visible)]="editDialog" [(editModel)]="editModel" (onSave)="save($event)">
    <tr>
        <th colspan="5" align="center" class="bg-primary">
            Order
        </th>
    </tr>
    <tr>
        <td class="label">
            <div>Name</div>
        </td>
        <td>
            <input [(ngModel)]="editModel.name">
        </td>
        <td class="label">
            <div>Count</div>
        </td>
        <td>
            <input type="number" [(ngModel)]="editModel.count">
        </td>
    </tr>
    <tr>
        <td class="label">Price</td>
        <td>
            <input [(ngModel)]="editModel.price">
        </td>
    </tr>
</crud-dialog>
